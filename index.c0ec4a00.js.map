{"mappings":"qhBAAAA,EAAA,S,iCCAA,IAAAC,EAAAD,EAAA,SCAAE,EAAAF,EAAA,SAEA,MAAMG,EAAU,CACdC,OAAQ,MACRC,IAAK,gDACLC,OAAQ,CACNC,SAAU,KACVC,QAAS,oCAEXC,QAAS,CACPC,OAAQ,mBACRC,cAAe,qCAInB,IAAIC,EAAS,KAENC,eAAeC,IACpB,GAAIF,EACF,OAAOA,EAET,IACE,MAAMG,QAAeb,EAAAc,QAAMC,QAAQd,GAEnC,OADAS,EAASG,EAAOG,KAAKC,OACdP,CAIT,CAHE,MAAOQ,GAEP,OADAC,QAAQC,MAAMF,GACP,EACT,CACF,C,8BDtBA,MAGMG,EAAgBC,SAASC,cAAc,kBACvCC,EAAcF,SAASG,eAAe,YAEtCC,EAAc,GAIbf,eAAegB,EAAWC,EAAYC,EAAaC,EAAW,KACnE,EAAAC,EAAAC,cACA,IACEH,GAAe,EAEf,MAAMZ,QAAeL,IACrBO,QAAQc,IAAIhB,GAEZ,IAAIiB,QAAe,EAAAnC,EAAAoC,aAAYP,EAAYC,GAG3C,MAAMO,EAAkBF,EAAOG,QAC5BC,MAAM,EAAGR,GACTS,KAAI,EAACC,YAAEA,EAAWC,UAAEA,EAASC,GAAEA,EAAEC,aAAEA,EAAYC,MAAEA,EAAKC,aAAEA,MACvD,MAAMC,EAAaN,EACf,kCAAsBA,IACtB,6EACCd,EAAYqB,SAASD,IACxBpB,EAAYsB,KAAKF,GAGnB,MAAMG,EAAaR,EAChBF,KAAIW,IACH,MAAMC,EAAalC,EAAOmC,MAAKC,GAASA,EAAMX,KAAOQ,IACrD,OAAOC,EAAaA,EAAWG,KAAO,eAAe,IAEtDC,KAAK,KAER,MAAO,gDAAgDb,4BACzCI,WAAoBF,gBAAoBF,uBAC9CE,EAAMY,oCACPP,aAAsBN,EAAaL,MAAM,EAAG,sCACrC,KAElB,EAAAP,EAAAC,cACA,MAAMyB,EAAiB,GACvB,IAAK,IAAIC,EAAI,EAAGA,EAAItB,EAAgBuB,OAAQD,GAAK,EAC/CD,EAAeT,KAAKZ,EAAgBE,MAAMoB,EAAGA,EAAI,GAAGH,KAAK,KAG3DlC,EAAcuC,mBAAmB,YAAaH,EAAeF,KAAK,KAClE,MAAMM,EAAW3B,EAAO4B,YAExB,GADA3C,QAAQc,IAAIC,EAAO4B,aACfjC,IAAgBgC,EAOlB,OANArC,EAAYuC,MAAMC,QAAU,OAC5BC,EAAAC,GAASC,OAAOC,QAAQ,6DAA8D,CACpFC,QAAS,IACTC,SAAU,cAEZ,EAAAvC,EAAAwC,aAMJ,CAHE,MAAOnD,IACP,EAAAW,EAAAwC,cACApD,QAAQC,MAAMA,EAChB,EACA,EAAAW,EAAAwC,aACF,C,iCE1EA,MAAMC,EAAQlD,SAASC,cAAc,sBAOrC,SAASkD,IACLD,EAAME,MAAQ,EAClB,CANAF,EAAMG,iBAAiB,QAASF,GAChCD,EAAMG,iBAAiB,QAASF,GAChCD,EAAMG,iBAAiB,SAAUF,GHUjC,MAAMG,EAAOtD,SAASC,cAAc,gBAC9BsD,EAAcvD,SAASC,cAAc,wBACrCuD,EAAgBxD,SAASC,cAAc,kBAEvCwD,EAAczD,SAASG,eAAe,YAE5C,IAAIuD,EAAa,GACbC,EAAc,EAGlBL,EAAKD,iBAAiB,UAAU,SAAUO,GACxCA,EAAMC,iBACNF,EAAc,EAEdD,EAAaH,EAAYH,MAEzBI,EAAcM,UAAY,GAE1BzD,EAAWqD,EAAYC,EAVR,GAWjB,IAEAtD,EAAWkD,EAAYH,MAAOO,EAbb,IAejBF,EAAYJ,iBAAiB,SAAS,KACpCM,IACAtD,EAAWqD,EAAYC,EAjBR,GAiBqB","sources":["src/index.js","src/js/draw-movie.js","src/js/fetch-genres.js","src/js/clear-search-input.js"],"sourcesContent":["import './js/modal-movie.js';\nimport './js/add-queue.js';\nimport './js/add-watchlist.js';\nimport './js/dark-mode.js';\nimport './js/draw-movie.js';\nimport './js/fetch.js';\nimport './js/fetch-genres.js';\nimport './js/loader.js';\nimport './js/modal-close.js';\nimport './js/modal-team.js';\nimport './js/clear-search-input.js';\nimport { drawMovies } from './js/draw-movie';\n\nimport './sass/main.scss';\n\nconst form = document.querySelector('.search-form');\nconst searchField = document.querySelector('[name=\"searchQuery\"]');\nconst moviesGallery = document.querySelector('.gallery__list');\n\nconst btnLoadMore = document.getElementById('loadMore');\n\nlet inputValue = '';\nlet currentPage = 0;\nconst pageSize = 18;\n\nform.addEventListener('submit', function (event) {\n  event.preventDefault();\n  currentPage = 0;\n\n  inputValue = searchField.value;\n\n  moviesGallery.innerHTML = '';\n\n  drawMovies(inputValue, currentPage, pageSize);\n});\n\ndrawMovies(searchField.value, currentPage, pageSize);\n\nbtnLoadMore.addEventListener('click', () => {\n  currentPage++;\n  drawMovies(inputValue, currentPage, pageSize);\n});\n","import { fetchMovies } from './fetch.js';\nimport { fetchGenres } from './fetch-genres.js';\nimport { showLoader, hideLoader } from './loader';\nimport Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\n\n// Stała z bazowym adresem plakatów filmowych\nconst BASE_POSTER_PATH = 'https://image.tmdb.org/t/p/w500';\n\n// Elementy DOM\nconst moviesGallery = document.querySelector('.gallery__list');\nconst btnLoadMore = document.getElementById('loadMore');\n// Tablica do przechowywania adresów plakatów filmowych\nconst posterArray = [];\n\n// let currentPage = 0;\n// Funkcja do rysowania filmów\nexport async function drawMovies(inputValue, currentPage, pageSize = 18) {\n  showLoader();\n  try {\n    currentPage += 1;\n    // Pobierz listę gatunków filmowych\n    const genres = await fetchGenres();\n    console.log(genres);\n\n    let movies = await fetchMovies(inputValue, currentPage);\n\n    // Przetwórz filmy i dodaj je do galerii\n    const galleryOfMovies = movies.results\n      .slice(0, pageSize)\n      .map(({ poster_path, genre_ids, id, release_date, title, vote_average }) => {\n        const posterPath = poster_path\n          ? `${BASE_POSTER_PATH}${poster_path}`\n          : 'https://moviereelist.com/wp-content/uploads/2019/07/poster-placeholder.jpg';\n        if (!posterArray.includes(posterPath)) {\n          posterArray.push(posterPath);\n        }\n        // const voteAverage = vote_average.slice(0, 3);\n        const genreNames = genre_ids\n          .map(genreId => {\n            const foundGenre = genres.find(genre => genre.id === genreId);\n            return foundGenre ? foundGenre.name : 'Unknown Genre';\n          })\n          .join(',');\n\n        return `<li class=\"gallery__list-item\" data-movieid=\"${id}\">\n          <img src=\"${posterPath}\" alt=\"${title}\" movie-id=\"${id}\"/>\n          <h3>${title.toUpperCase()}</h3>\n          <p>${genreNames} | <span>${release_date.slice(0, 4)}</span></p>\n                </li>`;\n      });\n    showLoader();\n    const desktopGallery = [];\n    for (let i = 0; i < galleryOfMovies.length; i += 3) {\n      desktopGallery.push(galleryOfMovies.slice(i, i + 3).join(''));\n    }\n\n    moviesGallery.insertAdjacentHTML('beforeend', desktopGallery.join(''));\n    const lastPage = movies.total_pages;\n    console.log(movies.total_pages);\n    if (currentPage === lastPage) {\n      btnLoadMore.style.display = 'none';\n      Notiflix.Notify.failure(\"We're sorry, but you've reached the end of search results.\", {\n        timeout: 3000,\n        fontSize: '15px',\n      });\n      hideLoader();\n      return;\n    }\n  } catch (error) {\n    hideLoader();\n    console.error(error);\n  }\n  hideLoader();\n}\n","import axios from 'axios';\n\nconst options = {\n  method: 'GET',\n  url: 'https://api.themoviedb.org/3/genre/movie/list',\n  params: {\n    language: 'en',\n    api_key: '55e390226d2f3f6feba5afe684a5a044',\n  },\n  headers: {\n    accept: 'application/json',\n    Authorization: '55e390226d2f3f6feba5afe684a5a044',\n  },\n};\n\nlet genres = null;\n\nexport async function fetchGenres() {\n  if (genres) {\n    return genres;\n  }\n  try {\n    const result = await axios.request(options);\n    genres = result.data.genres;\n    return genres;\n  } catch (e) {\n    console.error(e);\n    return [];\n  }\n}\n","const input = document.querySelector('.search-form-input')\n\n\ninput.addEventListener('focus', clearInput);\ninput.addEventListener('click', clearInput);\ninput.addEventListener('submit', clearInput);\n\nfunction clearInput() {\n    input.value = '';\n}"],"names":["parcelRequire","$lN2wz","$hGVxz","$ed72530fa1371c8c$var$options","method","url","params","language","api_key","headers","accept","Authorization","$ed72530fa1371c8c$var$genres","async","$ed72530fa1371c8c$export$e95d448b93b2cdb","result","default","request","data","genres","e","console","error","$b7c354c8e5c43b04$var$moviesGallery","document","querySelector","$b7c354c8e5c43b04$var$btnLoadMore","getElementById","$b7c354c8e5c43b04$var$posterArray","$b7c354c8e5c43b04$export$fb073058993321eb","inputValue","currentPage","pageSize","$fHyLY","showLoader","log","movies","fetchMovies","galleryOfMovies","results","slice","map","poster_path","genre_ids","id","release_date","title","vote_average","posterPath","includes","push","genreNames","genreId","foundGenre","find","genre","name","join","toUpperCase","desktopGallery","i","length","insertAdjacentHTML","lastPage","total_pages","style","display","$parcel$interopDefault","$7IoHk","Notify","failure","timeout","fontSize","hideLoader","$a4b1be1c3c98f3b9$var$input","$a4b1be1c3c98f3b9$var$clearInput","value","addEventListener","$1cb340a3d58589e5$var$form","$1cb340a3d58589e5$var$searchField","$1cb340a3d58589e5$var$moviesGallery","$1cb340a3d58589e5$var$btnLoadMore","$1cb340a3d58589e5$var$inputValue","$1cb340a3d58589e5$var$currentPage","event","preventDefault","innerHTML"],"version":3,"file":"index.c0ec4a00.js.map"}