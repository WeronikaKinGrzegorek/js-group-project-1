{"mappings":"koBAAA,MAAMA,EAAS,mCACTC,EAAkBC,SAASC,cAAc,WACzCC,EAAiBF,SAASG,eAAe,YAC/C,IACIC,EADAC,EAAc,EAGlBC,eAAeC,EAAeC,GAC5B,MAAMC,EAAW,yDAAyDX,mBAC1E,IACE,MAAMY,QAAiBC,MAAMF,GAGvBG,SAFkBF,EAASG,QAETC,OAAOC,MAAKH,GAASA,EAAMI,KAAOR,IAC1D,OAAOI,EAAQA,EAAMK,KAAO,UAI9B,CAHE,MAAOC,GAEP,OADAC,QAAQD,MAAM,4BAA6BA,GACpC,UACT,CACF,CA0DO,SAASE,EAAiBC,GAC/B,MAAMC,EAAeD,EAAME,OAAOC,QAAQ,UAC1C,GAAIF,EAAc,CAChB,MAAMG,EAAaC,MAAMC,KAAK5B,EAAgB6B,UAAUC,QAAQP,IAtDpEhB,eAAyBwB,GACvB,MAAMC,EAAQ/B,SAASG,eAAe,cAGhC6B,GAFeD,EAAM9B,cAAc,kBAErB8B,EAAM9B,cAAc,iBACxC+B,EAAYC,IAAM,kCAAkCH,EAAUI,cAC9DF,EAAYG,IAAML,EAAUM,MAETL,EAAM9B,cAAc,eAC5BoC,YAAcP,EAAUM,MAEfL,EAAM9B,cAAc,gBAC5BoC,YAAcP,EAAUQ,aAEZP,EAAM9B,cAAc,oBAC5BoC,YAAcP,EAAUS,WAEbR,EAAM9B,cAAc,uBAC5BoC,YAAcP,EAAUU,eAE3C,MAAMC,EAAWX,EAAUY,UACrBC,QAAmBC,QAAQC,IAC/BJ,EAASK,KAAIxC,MAAME,SAAiBD,EAAeC,MAEjCuB,EAAM9B,cAAc,gBAC5BoC,YAAcM,EAAWI,KAAK,MAEpBhB,EAAM9B,cAAc,kBAC5BoC,YAAcP,EAAUkB,SAEhBjB,EAAM9B,cAAc,kBAC5BgD,iBAAiB,SAAS,KACtC9B,QAAQ+B,IAAI,0BAA4BpB,EAAUM,MAAK,IAGjCL,EAAM9B,cAAc,oBAC5BgD,iBAAiB,SAAS,KACxC9B,QAAQ+B,IAAI,yBAA2BpB,EAAUM,MAAK,IAGpCL,EAAM9B,cAAc,gBAC5BkD,KAAO,gDAAgDrB,EAAUM,gBAE7EL,EAAMqB,MAAMC,QAAU,OACxB,CAYIC,CADkBlD,EAAKmD,QAAQ9B,GAEjC,CACF,CAEAzB,SAASiD,iBAAiB,QAAS7B,GAKnCd,eAAekD,IACb,MAAMC,EAAM,sDAAsD3D,yBAA8BO,IAChG,IACE,MAAMK,QAAiBC,MAAM8C,GAC7BrD,QAAaM,EAASG,OAEtB,IAAK,MAAM6C,KAAStD,EAAKmD,QAAS,CAChC,MAAMjC,EAAetB,SAAS2D,cAAc,OAC5CrC,EAAasC,UAAUC,IAAI,SAE3B,MAAMlB,QAAmBC,QAAQC,IAC/Ba,EAAMhB,UAAUI,KAAIxC,MAAME,SAAiBD,EAAeC,MAGtDsD,GApFQC,EAoFiBL,EAAMM,aAnF5B,IAAIC,KAAKF,GACVG,eAoFR5C,EAAa6C,UAAY,sDACoBT,EAAMxB,qBAAqBwB,EAAMtB,wBACtEsB,EAAMtB,iCACAO,EAAWI,KAAK,uCACTe,gBAErB/D,EAAgBqE,YAAY9C,EAC9B,CAEAjB,GAGF,CAFE,MAAOa,GACPC,QAAQD,MAAM,0BAA2BA,EAC3C,CAlGF,IAAoB6C,CAmGpB,CAhCyB/D,SAASG,eAAe,oBAChC8C,iBAAiB,SAjBlC,WACgBjD,SAASG,eAAe,cAChCiD,MAAMC,QAAU,MACxB,IA+CAnD,EAAe+C,iBAAiB,QAASO,GAEzCA,G","sources":["src/js/modal-movie.js"],"sourcesContent":["const apiKey = '55e390226d2f3f6feba5afe684a5a044';\nconst moviesContainer = document.querySelector('.movies');\nconst loadMoreButton = document.getElementById('loadMore');\nlet currentPage = 1;\nlet data;\n\nasync function fetchGenreName(genreId) {\n  const genreUrl = `https://api.themoviedb.org/3/genre/movie/list?api_key=${apiKey}&language=en-US`;\n  try {\n    const response = await fetch(genreUrl);\n    const genreData = await response.json();\n\n    const genre = genreData.genres.find(genre => genre.id === genreId);\n    return genre ? genre.name : 'Nieznany';\n  } catch (error) {\n    console.error('Błąd pobierania gatunków:', error);\n    return 'Nieznany';\n  }\n}\n\nfunction formatDate(dateString) {\n  const date = new Date(dateString);\n  return date.getFullYear();\n}\n\nasync function openModal(movieData) {\n  const modal = document.getElementById('movieModal');\n  const modalContent = modal.querySelector('.modal-content');\n\n  const modalPoster = modal.querySelector('#modalPoster');\n  modalPoster.src = `https://image.tmdb.org/t/p/w300${movieData.poster_path}`;\n  modalPoster.alt = movieData.title;\n\n  const modalTitle = modal.querySelector('#modalTitle');\n  modalTitle.textContent = movieData.title;\n\n  const modalRating = modal.querySelector('#modalRating');\n  modalRating.textContent = movieData.vote_average;\n\n  const modalPopularity = modal.querySelector('#modalPopularity');\n  modalPopularity.textContent = movieData.popularity;\n\n  const modalOriginalTitle = modal.querySelector('#modalOriginalTitle');\n  modalOriginalTitle.textContent = movieData.original_title;\n\n  const genreIds = movieData.genre_ids;\n  const genreNames = await Promise.all(\n    genreIds.map(async genreId => await fetchGenreName(genreId)),\n  );\n  const modalGenres = modal.querySelector('#modalGenres');\n  modalGenres.textContent = genreNames.join(', ');\n\n  const modalOverview = modal.querySelector('#modalOverview');\n  modalOverview.textContent = movieData.overview;\n\n  const watchedButton = modal.querySelector('#watchedButton');\n  watchedButton.addEventListener('click', () => {\n    console.log('Dodano do obejrzanych: ' + movieData.title);\n  });\n\n  const watchlistButton = modal.querySelector('#watchlistButton');\n  watchlistButton.addEventListener('click', () => {\n    console.log('Dodano do obejrzenia: ' + movieData.title);\n  });\n\n  const trailerLink = modal.querySelector('#trailerLink');\n  trailerLink.href = `https://www.youtube.com/results?search_query=${movieData.title}+trailer`;\n\n  modal.style.display = 'block';\n}\n\nfunction closeModal() {\n  const modal = document.getElementById('movieModal');\n  modal.style.display = 'none';\n}\n\nexport function handleMovieClick(event) {\n  const movieElement = event.target.closest('.movie');\n  if (movieElement) {\n    const movieIndex = Array.from(moviesContainer.children).indexOf(movieElement);\n    const movieData = data.results[movieIndex];\n    openModal(movieData);\n  }\n}\n\ndocument.addEventListener('click', handleMovieClick);\n\nconst modalCloseButton = document.getElementById('modalCloseButton');\nmodalCloseButton.addEventListener('click', closeModal);\n\nasync function fetchMoviesPopular() {\n  const url = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=en-US&page=${currentPage}`;\n  try {\n    const response = await fetch(url);\n    data = await response.json();\n\n    for (const movie of data.results) {\n      const movieElement = document.createElement('div');\n      movieElement.classList.add('movie');\n\n      const genreNames = await Promise.all(\n        movie.genre_ids.map(async genreId => await fetchGenreName(genreId)),\n      );\n\n      const releaseYear = formatDate(movie.release_date);\n\n      movieElement.innerHTML = `\n        <img src=\"https://image.tmdb.org/t/p/w300${movie.poster_path}\" alt=\"${movie.title}\">\n        <h3>${movie.title}</h3>\n        <p>Genre: ${genreNames.join(', ')}</p>\n        <p>Release Year: ${releaseYear}</p>\n      `;\n      moviesContainer.appendChild(movieElement);\n    }\n\n    currentPage++;\n  } catch (error) {\n    console.error('Błąd pobierania danych:', error);\n  }\n}\n\nloadMoreButton.addEventListener('click', fetchMoviesPopular);\n\nfetchMoviesPopular();\n"],"names":["$a898f20bd771b561$var$apiKey","$a898f20bd771b561$var$moviesContainer","document","querySelector","$a898f20bd771b561$var$loadMoreButton","getElementById","$a898f20bd771b561$var$data","$a898f20bd771b561$var$currentPage","async","$a898f20bd771b561$var$fetchGenreName","genreId","genreUrl","response","fetch","genre","json","genres","find","id","name","error","console","$a898f20bd771b561$export$509c1bc7f3fb39ee","event","movieElement","target","closest","movieIndex","Array","from","children","indexOf","movieData","modal","modalPoster","src","poster_path","alt","title","textContent","vote_average","popularity","original_title","genreIds","genre_ids","genreNames","Promise","all","map","join","overview","addEventListener","log","href","style","display","$a898f20bd771b561$var$openModal","results","$a898f20bd771b561$var$fetchMoviesPopular","url","movie","createElement","classList","add","releaseYear","dateString","release_date","Date","getFullYear","innerHTML","appendChild"],"version":3,"file":"index.eab96eae.js.map"}